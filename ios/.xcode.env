# This `.xcode.env` file is versioned and is used to source the environment
# used when running script phases inside Xcode.
# To customize your local environment, you can create an `.xcode.env.local`
# file that is not versioned.

# NODE_BINARY variable contains the PATH to the node executable.
#
# Customize the NODE_BINARY variable here.
# For example, to use nvm with brew, add the following line
# . "$(brew --prefix nvm)/nvm.sh" --no-use

# Try to find node in common locations
if [ -z "$NODE_BINARY" ]; then
  # Try command -v first (works in most cases)
  NODE_BINARY=$(command -v node)
  
  # If not found, try common paths
  if [ -z "$NODE_BINARY" ]; then
    if [ -f "/usr/local/bin/node" ]; then
      NODE_BINARY="/usr/local/bin/node"
    elif [ -f "/opt/homebrew/bin/node" ]; then
      NODE_BINARY="/opt/homebrew/bin/node"
    elif [ -f "$HOME/.nvm/versions/node/$(cat $HOME/.nvm/alias/default 2>/dev/null || echo 'v20')/bin/node" ]; then
      NODE_BINARY="$HOME/.nvm/versions/node/$(cat $HOME/.nvm/alias/default 2>/dev/null || echo 'v20')/bin/node"
    fi
  fi
fi

export NODE_BINARY
